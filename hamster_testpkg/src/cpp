<?xml version="1.0"?>
<launch>

<env name="GAZEBO_MODEL_PATH" value="$(find hamster_vehicle_gazebo):$(find hamster_vehicle_gazebo)/models"/>
	<arg name="gui" value="true"/>


<!-- Robot description -->

<param name="hamster_vehicle_description-master" command="$(find xacro)/xacro --inorder $(find hamster_vehicle_description-master)/urdf/front_wheel$(arg model).urdf.xacro" />
<param name="hamster_vehicle_description-master" command="$(find xacro)/xacro --inorder $(find hamster_vehicle_description-master)/urdf/hamster$(arg model).urdf.xacro" />
<param name="hamster_vehicle_description-master" command="$(find xacro)/xacro --inorder $(find hamster_vehicle_description-master)/urdf/rear_wheel$(arg model).urdf.xacro" /> 

<!-- GAZEBO start -->
<include file="$(find hamster_vehicle_gazebo)/launch/hamster_world.launch">
	<arg name="gui" value="$(arg gui)"/>
	<arg name="world_name" value=""/>
</include>


<!-- Gmapping -->
<node pkg="gmapping" type="slam_gmapping" name="turtlebot3_slam_gmapping" output="screen">
    <param name="base_frame" value="base_footprint"/>
    <param name="odom_frame" value="odom"/>
    <param name="map_frame"  value="map"/>
    <rosparam command="load" file="$(find turtlebot3_slam)/config/gmapping_params.yaml" />
  </node>




<!-- RVIZ -->
<node pkg="rviz" type="rviz" name="rviz" output="screen" args="-d $(find hamster_vehicle)/rviz/hamsters.rviz"/> 

<!-- AGENT1 -->
<include file="$(find hamster_vehicle_gazebo)/launch/hamster_vehicle_spawner.launch">
    <arg name="agent" value="agent1"/>
    <arg name="use_keyboard" value="false"/>
    <arg name="x" value="0"/>
    <arg name="y" value="0"/>
    <arg name="is_publishTF" default="true"/>
    <arg name="tf_target_topic" value="odom/ground_truth"/>
    <arg name="robot_version" default="V6"/>
</include>

<node name="transform_map_odom" pkg="tf2_ros" type="static_transform_publisher" args="0.0 0.0 0.0 0 0 0 1 map agent1/odom" />

</launch>